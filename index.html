<!-- 
Project Showcase - Version 0.0.25
Pixelated Hubble Nebula with Artifacts Showcase
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Artifacts Showcase</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Segoe UI', Arial, sans-serif; }
    
    #loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; align-items: center; justify-content: center; z-index: 1000; }
    .loading-text { color: #FFA500; font-size: 1.5rem; letter-spacing: 2px; text-shadow: 0 0 10px rgba(255,165,0,0.7); }
    
    #milkyway { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; }
    
    /* Debug console - COMPACT BOTTOM VERSION */
    #debug-console {
      position: fixed;
      bottom: 10px;
      left: 10px;
      width: calc(100% - 20px);
      height: 3.5em;
      background: rgba(0,20,0,0.9);
      color: #00ff00;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      padding: 5px;
      border: 1px solid #00aa00;
      z-index: 100;
      overflow-y: auto;
      border-radius: 3px;
      box-shadow: 0 0 10px rgba(0,255,0,0.3);
    }
    
    @media (max-width: 768px) {
      #debug-console { 
        font-size: 9px;
        height: 3em;
      }
    }
  </style>
</head>
<body>
  <div id="loading"><div class="loading-text">SYNCHRONIZING WITH THE UNIVERSE...</div></div>
  <div id="milkyway"></div>
  <div id="debug-console">[INIT] Debug console active...</div>
  
  <div class="overlay">
    <h1 class="title">ARTIFACTS SHOWCASE</h1>
    <div class="projects">
      <div class="project-card" onclick="showArtifact(1)" id="card-1">
        <div class="project-icon" id="icon-1"></div>
        <span>Galaxy Runner</span>
      </div>
      <div class="project-card" onclick="showArtifact(2)" id="card-2">
        <div class="project-icon" id="icon-2"></div>
        <span>Quantum Maze</span>
      </div>
      <div class="project-card" onclick="showArtifact(3)" id="card-3">
        <div class="project-icon" id="icon-3"></div>
        <span>Neural Drift</span>
      </div>
    </div>
  </div>

  <script>
    // Global variables
    let scene, camera, renderer;
    let projectScenes = {};
    let projectRenderers = {};
    let projectMeshes = {};
    let time = 0;
    let hubbleElements = [];
    let hoverEffects = {};
    let debugConsole = document.getElementById('debug-console');
    
    // Debug logging function
    function logMessage(message) {
      console.log(`[COSMIC] ${message}`);
      if (debugConsole) {
        const timestamp = new Date().toLocaleTimeString();
        debugConsole.innerHTML += `[${timestamp}] ${message}<br>`;
        debugConsole.scrollTop = debugConsole.scrollHeight;
      }
    }
    
    // Hide loading screen
    function hideLoadingScreen() {
      logMessage("Hiding loading screen...");
      const loading = document.getElementById('loading');
      setTimeout(() => {
        loading.style.opacity = '0';
        setTimeout(() => {
          loading.style.display = 'none';
          document.querySelector('.overlay').style.opacity = '1';
          logMessage("Main interface visible");
        }, 500);
      }, 1000);
    }
    
    // Create pixelated Hubble nebula using sampled pixels
    function createPixelatedHubbleNebula(imageUrl) {
      logMessage("Creating pixelated Hubble nebula...");
      
      try {
        const container = document.getElementById('milkyway');
        if (!container) {
          logMessage("ERROR: Milkyway container not found!");
          return false;
        }
        
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 3000);
        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2;
        container.appendChild(renderer.domElement);
        logMessage("Three.js renderer initialized");
        
        // Load Hubble image
        const textureLoader = new THREE.TextureLoader();
        const hubbleImage = textureLoader.load(imageUrl, () => {
          logMessage("Hubble image loaded successfully");
          
          // Sample every 4th pixel
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d');
          canvas.width = hubbleImage.image.width / 4;
          canvas.height = hubbleImage.image.height / 4;
          
          context.drawImage(
            hubbleImage.image,
            0, 0, hubbleImage.image.width, hubbleImage.image.height,
            0, 0, canvas.width, canvas.height
          );
          
          const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
          const data = imageData.data;
          
          // Create buffer geometry for pixelated nebula
          const nebulaGeometry = new THREE.BufferGeometry();
          const positions = [];
          const colors = [];
          
          for (let y = 0; y < canvas.height; y++) {
            for (let x = 0; x < canvas.width; x++) {
              const index = (y * canvas.width + x) * 4;
              
              // Skip black pixels
              if (data[index + 3] === 0) continue;
              
              // Convert pixel coordinates to 3D space
              const positionZ = Math.random() * 1000 - 500; // Depth
              const positionX = (x / canvas.width) * 2000 - 1000;
              const positionY = (y / canvas.height) * 2000 - 1000;
              
              positions.push(positionX, positionY, positionZ);
              
              // Use pixel color
              colors.push(data[index] / 255, data[index + 1] / 255, data[index + 2] / 255);
            }
          }
          
          nebulaGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
          nebulaGeometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
          
          const nebulaMaterial = new THREE.PointsMaterial({
            size: 2, // Pixel size
            vertexColors: true,
            transparent: true,
            opacity: 0.8,
            sizeAttenuation: true,
            blending: THREE.AdditiveBlending
          });
          
          const nebulaCloud = new THREE.Points(nebulaGeometry, nebulaMaterial);
          scene.add(nebulaCloud);
          logMessage("Pixelated Hubble nebula created");
        });
        
        // Background stars
        const starsGeometry = new THREE.BufferGeometry();
        const starCount = 10000;
        const positions = new Float32Array(starCount * 3);
        const colors = new Float32Array(starCount * 3);
        
        for (let i = 0; i < starCount; i++) {
          const i3 = i * 3;
          
          // Galactic distribution
          const radius = Math.random() * 2000;
          const angle = Math.random() * Math.PI * 2;
          const height = (Math.random() - 0.5) * 500;
          
          positions[i3] = radius * Math.cos(angle);
          positions[i3 + 1] = height;
          positions[i3 + 2] = radius * Math.sin(angle);
          
          // Realistic star colors
          const colorType = Math.random();
          if (colorType < 0.6) {
            colors[i3] = 0.9 + Math.random() * 0.1;
            colors[i3 + 1] = 0.9 + Math.random() * 0.1;
            colors[i3 + 2] = 1.0;
          } else if (colorType < 0.8) {
            colors[i3] = 0.7 + Math.random() * 0.3;
            colors[i3 + 1] = 0.8 + Math.random() * 0.2;
            colors[i3 + 2] = 1.0;
          } else {
            colors[i3] = 1.0;
            colors[i3 + 1] = 0.8 + Math.random() * 0.2;
            colors[i3 + 2] = 0.6 + Math.random() * 0.2;
          }
        }
        
        starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        starsGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
        
        const starsMaterial = new THREE.PointsMaterial({
          size: 1, // 1-pixel stars
          vertexColors: true,
          transparent: true,
          opacity: 0.9,
          sizeAttenuation: true,
          blending: THREE.AdditiveBlending
        });
        
        const starField = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starField);
        logMessage("Starfield created with 10,000 precise stars");
        
        camera.position.z = 15;
        
        // Handle resize
        window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
          logMessage("Window resized, renderer updated");
        });
        
        logMessage("Pixelated Hubble nebula initialization complete");
        return true;
      } catch (error) {
        logMessage(`ERROR in createPixelatedHubbleNebula: ${error.message}`);
        return false;
      }
    }
    
    // Animation Loop
    function animate() {
      requestAnimationFrame(animate);
      time += 0.016; // ~60fps
      
      // Animate nebula scene
      if (scene) {
        scene.rotation.y += 0.0001;
      }
      
      // Camera subtle movement
      if (camera) {
        camera.position.x = Math.sin(time * 0.05) * 5;
        camera.position.y = Math.cos(time * 0.03) * 3;
        camera.lookAt(scene ? scene.position : new THREE.Vector3(0,0,0));
      }
      
      // Render background
      if (renderer && scene && camera) {
        renderer.render(scene, camera);
      }
    }
    
    // Check if Three.js is loaded
    function checkThreeJS() {
      if (typeof THREE !== 'undefined') {
        logMessage("Three.js loaded successfully - version " + THREE.REVISION);
        return true;
      } else {
        logMessage("ERROR: Three.js not loaded!");
        return false;
      }
    }
    
    // Initialize everything
    window.addEventListener('load', () => {
      logMessage("=== ARTIFACTS SHOWCASE v0.0.25 BOOT SEQUENCE ===");
      logMessage("System initialization started...");
      
      // Initialize debug console
      debugConsole = document.getElementById('debug-console');
      if (debugConsole) {
        debugConsole.innerHTML = '[BOOT] Artifacts Showcase v0.0.25 initializing...<br>';
      }
      
      logMessage("DOM loaded, beginning Three.js setup...");
      
      // Check Three.js
      if (!checkThreeJS()) {
        logMessage("FATAL: Cannot proceed without Three.js");
        return;
      }
      
      try {
        logMessage("Starting pixelated Hubble nebula creation...");
        const nebulaSuccess = createPixelatedHubbleNebula('https://example.com/hubble-nebula.jpg'); // Replace with actual image URL
        if (!nebulaSuccess) {
          logMessage("WARNING: Failed to create nebula scene");
        }
        logMessage("Nebula systems online");
        
        setTimeout(() => {
          logMessage("Starting project icons creation...");
          createProjectIcons();
          logMessage("Project interface ready");
        }, 800);
        
        // Hide loading and show main interface
        logMessage("Starting UI transition sequence...");
        hideLoadingScreen();
        
        // Start animation
        logMessage("Animation engine starting...");
        animate();
        
        logMessage("=== ARTIFACTS SHOWCASE BOOT COMPLETE ===");
        logMessage("All systems nominal - Welcome to the Universe!");
        
      } catch (error) {
        logMessage(`FATAL BOOT ERROR: ${error.message}`);
        logMessage("Stack trace: " + error.stack);
      }
    });
  </script>
  
  <!-- Load Three.js from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</body>
</html>